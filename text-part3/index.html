<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="github.css" type="text/css" />
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#セクション1-ボタンとjavascriptの連携"><span class="toc-section-number">1</span> セクション1 ボタンとJavaScriptの連携</a></li>
<li><a href="#セクション-テキストフィールドとjavascriptの連携"><span class="toc-section-number">2</span> セクション２ テキストフィールドとJavaScriptの連携</a></li>
<li><a href="#セクション-javascriptによるhtmlの生成"><span class="toc-section-number">3</span> セクション２ JavascriptによるHTMLの生成</a></li>
<li><a href="#セクション-応用編"><span class="toc-section-number">4</span> セクション３ 応用編</a></li>
<li><a href="#セクション1-ローカル変数とグローバル変数"><span class="toc-section-number">5</span> セクション1 ローカル変数とグローバル変数</a></li>
<li><a href="#セクション-canvas入門"><span class="toc-section-number">6</span> セクション２ canvas入門</a></li>
<li><a href="#セクション-応用編-1"><span class="toc-section-number">7</span> セクション３ 応用編</a></li>
<li><a href="#セクション1-タイマー"><span class="toc-section-number">8</span> セクション1 タイマー</a></li>
<li><a href="#セクション-タイマーとcanvasを使ったアニメーションの作成"><span class="toc-section-number">9</span> セクション２ タイマーとcanvasを使ったアニメーションの作成（１）</a></li>
</ul>
</div>
<h1 id="セクション1-ボタンとjavascriptの連携"><span class="header-section-number">1</span> セクション1 ボタンとJavaScriptの連携</h1>
<p>セクション１では，htmlボタンの作り方とJavaScriptの基本を学びます．</p>
<h2 id="ボタンを作る"><span class="header-section-number">1.1</span> ボタンを作る</h2>
<p>htmlを使ってボタンを作るには，buttonタグを使います．</p>
<pre><code>&lt;button&gt;[ボタンのラベル]&lt;/button&gt;</code></pre>
<div class="sourceCode" id="lst:1-1" caption="家を書くサンプルプログラム"><table class="sourceCode javascript numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
</pre></td><td class="sourceCode"><pre><code class="sourceCode javascript"><span class="op">&lt;</span>html<span class="op">&gt;</span>
    <span class="op">&lt;</span>head<span class="op">&gt;</span>
    <span class="op">&lt;</span><span class="ss">/head&gt;</span>
<span class="ss">    &lt;body&gt;</span>
<span class="ss">        &lt;${button}&gt;A&lt;/</span>$<span class="op">{</span>button<span class="op">}&gt;</span>
    <span class="op">&lt;</span><span class="ss">/body&gt;</span>
<span class="ss">&lt;/html</span><span class="op">&gt;</span></code></pre></td></tr></table></div>
<h2 id="javascriptを埋め込む"><span class="header-section-number">1.2</span> Javascriptを埋め込む</h2>
<p>htmlにJavascriptプログラムを埋め込むには，scriptタグを使います．</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;script&gt;
        [Javascriptのプログラム]
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<div class="sourceCode" id="lst:1-1" caption="家を書くサンプルプログラム"><table class="sourceCode javascript numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="sourceCode"><pre><code class="sourceCode javascript"><span class="op">&lt;</span>html<span class="op">&gt;</span>
    <span class="op">&lt;</span>head<span class="op">&gt;</span>
        <span class="op">&lt;</span>$<span class="op">{</span>script<span class="op">}&gt;</span>
            <span class="kw">function</span> <span class="at">a</span>()<span class="op">{</span>
                <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;hello, world&#39;</span>)<span class="op">;</span>
            <span class="op">}</span>
        <span class="op">&lt;</span>$<span class="op">{</span>\<span class="ss">/script}&gt;</span>
<span class="ss">    &lt;/head</span><span class="op">&gt;</span>
    <span class="op">&lt;</span>body<span class="op">&gt;</span>
    <span class="op">&lt;</span><span class="ss">/body&gt;</span>
<span class="ss">&lt;/html</span><span class="op">&gt;</span></code></pre></td></tr></table></div>
<h2 id="ボタンが押されたときにjavascriptプログラムを動かす"><span class="header-section-number">1.3</span> ボタンが押されたときにJavascriptプログラムを動かす</h2>
<p>ボタンが押されたときにJavascriptプログラムを動かすようにするには，buttonタグの属性onclickに関数名を指定します．</p>
<pre><code>&lt;button onclick=&quot;a()&quot;&gt;A&lt;/button&gt;</code></pre>
<div class="sourceCode" id="lst:1-1" caption="家を書くサンプルプログラム"><table class="sourceCode javascript numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="sourceCode"><pre><code class="sourceCode javascript"><span class="op">&lt;</span>html<span class="op">&gt;</span>
    <span class="op">&lt;</span>head<span class="op">&gt;</span>
        <span class="op">&lt;</span>script<span class="op">&gt;</span>
            <span class="kw">function</span> <span class="at">a</span>()<span class="op">{</span>
                <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;hello, world&#39;</span>)<span class="op">;</span>
            <span class="op">}</span>
        <span class="op">&lt;</span><span class="ss">/script&gt;</span>
<span class="ss">    &lt;/head</span><span class="op">&gt;</span>
    <span class="op">&lt;</span>body<span class="op">&gt;</span>
        <span class="op">&lt;</span>button $<span class="op">{</span>onclick<span class="op">}=</span><span class="st">&quot;${a()}&quot;</span><span class="op">&gt;</span>A<span class="op">&lt;</span><span class="ss">/button&gt;</span>
<span class="ss">    &lt;/body</span><span class="op">&gt;</span>
<span class="op">&lt;</span><span class="ss">/html&gt;</span></code></pre></td></tr></table></div>
<h3 id="tips"><span class="header-section-number">1.3.1</span> tips</h3>
<p>プログラムが完成したら，ボタンを押してみよう． window.alert(&quot;メッセージ&quot;)命令は，ダイアログにメッセージを出力します． なお，タートルではないJavascriptでは，print()命令は使えません．</p>
<h2 id="ボタンをつ作る"><span class="header-section-number">1.4</span> ボタンを２つ作る</h2>
<p>ボタンを２つ作ることもできます．</p>
<div class="sourceCode" id="lst:1-1" caption="家を書くサンプルプログラム"><table class="sourceCode javascript numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="sourceCode"><pre><code class="sourceCode javascript"><span class="op">&lt;</span>html<span class="op">&gt;</span>
    <span class="op">&lt;</span>head<span class="op">&gt;</span>
        <span class="op">&lt;</span>script<span class="op">&gt;</span>
            <span class="kw">function</span> <span class="at">a</span>()<span class="op">{</span>
                <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;A!&#39;</span>)<span class="op">;</span>
            <span class="op">}</span>
            <span class="kw">function</span> <span class="at">b</span>()<span class="op">{</span>
                <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;B!&#39;</span>)<span class="op">;</span>
            <span class="op">}</span>            
        <span class="op">&lt;</span><span class="ss">/script&gt;</span>
<span class="ss">    &lt;/head</span><span class="op">&gt;</span>
    <span class="op">&lt;</span>body<span class="op">&gt;</span>
        <span class="op">&lt;</span>button onclick<span class="op">=</span><span class="st">&quot;${a()}&quot;</span><span class="op">&gt;</span>A<span class="op">&lt;</span><span class="ss">/button&gt;</span>
<span class="ss">        &lt;button onclick=&quot;${b</span><span class="sc">()</span><span class="ss">}&quot;&gt;B&lt;/button</span><span class="op">&gt;</span>
    <span class="op">&lt;</span><span class="ss">/body&gt;</span>
<span class="ss">&lt;/html</span><span class="op">&gt;</span></code></pre></td></tr></table></div>
<h2 id="おみくじ"><span class="header-section-number">1.5</span> おみくじ</h2>
<p>タートルではないJavascriptでは，random()関数は使えません． 代わりに，Math.random()関数を使います． Math.random()関数は，0以上1未満の小数を生成し，戻り値として返します．</p>
<p>したがって，例えば0〜3までの数字を生成したければ</p>
<pre><code>var x = Math.floor(Math.random() * 4)</code></pre>
<p>1〜6までの数字を生成したければ</p>
<pre><code>var x = Math.floor(Math.random() * 5) + 1</code></pre>
<p>というようにプログラムします．</p>
<div class="sourceCode" id="lst:1-1" caption="家を書くサンプルプログラム"><table class="sourceCode javascript numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="sourceCode"><pre><code class="sourceCode javascript"><span class="op">&lt;</span>html<span class="op">&gt;</span>
    <span class="op">&lt;</span>head<span class="op">&gt;</span>
        <span class="op">&lt;</span>script<span class="op">&gt;</span>
            <span class="kw">function</span> <span class="at">a</span>()<span class="op">{</span>
                <span class="co">//0, 1の乱数を生成する</span>
                <span class="kw">var</span> x <span class="op">=</span> <span class="va">Math</span>.<span class="at">floor</span>($<span class="op">{</span><span class="va">Math</span>.<span class="at">random</span>()<span class="op">}</span> <span class="op">*</span> $<span class="op">{</span><span class="dv">2</span><span class="op">}</span>)
                <span class="cf">if</span>(x <span class="op">==</span> <span class="dv">0</span>)<span class="op">{</span>
                    <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;あたり！&#39;</span>)<span class="op">;</span>
                <span class="op">}</span><span class="cf">else</span><span class="op">{</span>
                    <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;はずれ．&#39;</span>)<span class="op">;</span>
                <span class="op">}</span>
            <span class="op">}</span>         
        <span class="op">&lt;</span><span class="ss">/script&gt;</span>
<span class="ss">    &lt;/head</span><span class="op">&gt;</span>
    <span class="op">&lt;</span>body<span class="op">&gt;</span>
        <span class="op">&lt;</span>h1<span class="op">&gt;</span>おみくじプログラム<span class="op">&lt;</span><span class="ss">/h1&gt;</span>
<span class="ss">        &lt;button onclick=&quot;a</span><span class="sc">()</span><span class="ss">&quot;&gt;A&lt;/button</span><span class="op">&gt;</span>
    <span class="op">&lt;</span><span class="ss">/body&gt;</span>
<span class="ss">&lt;/html</span><span class="op">&gt;</span></code></pre></td></tr></table></div>
<h1 id="セクション-テキストフィールドとjavascriptの連携"><span class="header-section-number">2</span> セクション２ テキストフィールドとJavaScriptの連携</h1>
<p>セクション２では，テキストフィールドへの入出力を学びます．</p>
<h2 id="テキストフィールドを作る"><span class="header-section-number">2.1</span> テキストフィールドを作る</h2>
<p>htmlを使ってテキストフィールドを作るには，inputタグを使います．</p>
<pre><code>&lt;input type=&quot;text&quot;&gt;</code></pre>
<h3 id="hint"><span class="header-section-number">2.1.1</span> hint</h3>
<p>右側のオレンジの部分にテキストフィールドを作るためのタグを入力してみましょう．</p>
<h3 id="mainindex.html"><span class="header-section-number">2.1.2</span> main(index.html)</h3>
<pre><code>&lt;html&gt;
    &lt;head&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;${input type=&quot;text&quot;}&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="テキストフィールドの初期値作る"><span class="header-section-number">2.2</span> テキストフィールドの初期値作る</h2>
<p>テキストフィールドの初期値を指定するには，value属性を使います．</p>
<pre><code>&lt;input type=&quot;text&quot; value=&quot;2&quot;&gt;</code></pre>
<h3 id="mainindex.html-1"><span class="header-section-number">2.2.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;
    &lt;head&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;input type=&quot;text&quot; ${value}=&quot;2&quot;&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="テキストフィールドから値を取得する"><span class="header-section-number">2.3</span> テキストフィールドから値を取得する</h2>
<p>テキストフィールドに記入された文字を取得するには，</p>
<pre><code>var x = document.getElementById(&#39;[id名]&#39;).value;</code></pre>
<p>プログラムを使います．</p>
<pre><code>document.getElementById(&#39;[id名]&#39;)</code></pre>
<p>でbodyタグの中身から，[id名]のついた要素（タグ）を探し，そのタグの属性であるvalueを</p>
<pre><code>.value</code></pre>
<p>で取得し，変数xに格納します．</p>
<h3 id="mainindex.html-2"><span class="header-section-number">2.3.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;    
&lt;head&gt;
    &lt;script&gt;
        function a(){
            var x = ${document}.${getElementById}(&#39;${textfield1}&#39;).value;
            window.alert(&#39;入力されたのは&#39; + x + &#39;です．&#39;);
        } 
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input id=&quot;textfield1&quot; type=&quot;text&quot;&gt;
    &lt;button onclick=&quot;a()&quot;&gt;A&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="テキストフィールドに値を入力する"><span class="header-section-number">2.4</span> テキストフィールドに値を入力する</h2>
<p>テキストフィールドに値を入力するには，</p>
<pre><code>documnet.getElementById(&#39;[id名]&#39;).value = x;</code></pre>
<p>(xは定義済みの変数)プログラムを使います．</p>
<h3 id="mainindex.html-3"><span class="header-section-number">2.4.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;    
&lt;head&gt;
    &lt;script&gt;
        function a(){
            var x = document.getElementById(&#39;textfield1&#39;).value;
            ${document}.${getElementById}(&#39;textfield2&#39;).value = x;
        } 
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input id=&quot;textfield1&quot; type=&quot;text&quot;&gt;
    &lt;input id=&quot;textfield2&quot; type=&quot;text&quot;&gt;
    &lt;button onclick=&quot;a()&quot;&gt;A&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="テキストフィールドから取得した文字列を数字に変換し計算を行う"><span class="header-section-number">2.5</span> テキストフィールドから取得した文字列を数字に変換し，計算を行う</h2>
<p>テキストフィールドから入力された値は，文字列になっています．したがって，入力された値を利用して計算をするには，数字の変数に変換する必要があります．</p>
<p>文字列を数字に変換するには，</p>
<pre><code>x = Number(x);</code></pre>
<p>(xは定義済みの変数)プログラムを使います．</p>
<p>Number関数で，文字列を数字に変えることができます． さあ，足し算プログラムを作ってみましょう．</p>
<h3 id="mainindex.html-4"><span class="header-section-number">2.5.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;    
&lt;head&gt;
    &lt;script&gt;
        function ${calc}(){
            var a = document.getElementById(&#39;textfield1&#39;).value;
            a = ${Number}(${a});
            var b = document.getElementById(&#39;textfield2&#39;).value;
            b = ${Number}(${b});
            var c = a + b;
            document.getElementById(&#39;${textfield3}&#39;).value = c;
        } 
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input id=&quot;textfield1&quot; type=&quot;text&quot;&gt;
    +
    &lt;input id=&quot;textfield2&quot; type=&quot;text&quot;&gt;
    &lt;button onclick=&quot;calc()&quot;&gt;=&lt;/button&gt;
    &lt;input id=&quot;textfield3&quot; type=&quot;text&quot;&gt;
    
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h1 id="セクション-javascriptによるhtmlの生成"><span class="header-section-number">3</span> セクション２ JavascriptによるHTMLの生成</h1>
<p>セクション２では，JavascriptでHTMLを生成し，リストや表を作る方法を学びます．</p>
<h2 id="タグの中身を書き換えるinnerhtml"><span class="header-section-number">3.1</span> タグの中身を書き換える（innerHTML）</h2>
<p>document.getElementById('xx')で取得したタグの中身を書き換えることができます．</p>
<pre><code>document.getElementById(&#39;xx&#39;).innerHTML = &#39;hello, world&#39;;</code></pre>
<p>document.getElementById('xx')で取得したタグの中身を.innerHTMLで取得したり，書き換えたりすることができます．</p>
<h3 id="hint-1"><span class="header-section-number">3.1.1</span> hint</h3>
<p>先週習ったテキストフィールドの書き換えでは，valueの属性値を書き換えたので，</p>
<pre><code>document.getElementById(&#39;xx&#39;).value = &#39;xx&#39;;</code></pre>
<p>という記述になりました．タグの中身を書き換える場合はinnerHTMLを使います． 間違えやすいので注意．</p>
<h3 id="mainindex.html-5"><span class="header-section-number">3.1.2</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            document.getElementById(&#39;hello&#39;).${innerHTML} = &#39;hello, world!&#39;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1 id=&quot;hello&quot;&gt;Title&lt;/h1&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="リスト箇条書きの要素を加える"><span class="header-section-number">3.2</span> リスト（箇条書き）の要素を加える</h2>
<p>innerHTMLにセットする文字列には，HTMLを含めることができます．</p>
<pre><code>document.getElementById(&#39;xx&#39;)
    .innerHTML = &#39;&lt;li&gt;りんご&lt;/li&gt;&#39;</code></pre>
<h3 id="hint-2"><span class="header-section-number">3.2.1</span> hint</h3>
<p>番号なしリストはulタグ，リストの要素は，liタグを使うのでしたね．</p>
<h3 id="mainindex.html-6"><span class="header-section-number">3.2.2</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            document.getElementById(&#39;fruits&#39;).innerHTML
             = &#39;${&lt;li&gt;}りんご${&lt;/li&gt;}&#39;;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;箇条書き&lt;/h1&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;${ul} id=&quot;fruits&quot;&gt;
    &lt;/${ul}&gt;        
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="複数の要素を加える"><span class="header-section-number">3.3</span> 複数の要素を加える</h2>
<p>複数の要素を加えるには，まず</p>
<pre><code>var html = &#39;&#39;;</code></pre>
<p>で，文字列型の変数を用意して，</p>
<pre><code>html = html + &#39;つなげたい文字列&#39;;</code></pre>
<p>というプログラムを書くことで，文字列を次々に連結していきます．</p>
<p>最後に，innerHTML属性を使うことで，作られた文字列を指定されたidのタグにセットします．</p>
<h3 id="mainindex.html-7"><span class="header-section-number">3.3.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            ${var html} = &#39;&#39;;
            html = html + &#39;&lt;li&gt;りんご&lt;/li&gt;&#39;;
            html = html + &#39;&lt;li&gt;みかん&lt;/li&gt;&#39;;
            html = html + &#39;&lt;li&gt;いちご&lt;/li&gt;&#39;;
            document.getElementById(&#39;fruits&#39;).innerHTML = html;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;箇条書き&lt;/h1&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;ul id=&quot;fruits&quot;&gt;
    &lt;/ul&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="繰り返しプログラムで要素を加える"><span class="header-section-number">3.4</span> 繰り返しプログラムで要素を加える</h2>
<p>文字列を連結してHTML出力する方法がわかったら， 応用として，繰り返しプログラムでタグを生成してみましょう．</p>
<p>先程と同様に</p>
<pre><code>var html = &#39;&#39;;</code></pre>
<p>で，文字列型の変数を用意し，繰り返しの中で</p>
<pre><code>html = html + &#39;&lt;li&gt;&#39; + i + &#39;&lt;/li&gt;&#39;;</code></pre>
<p>というプログラムを書くことで，数を数えるプログラムを作ることができます．</p>
<h3 id="mainindex.html-8"><span class="header-section-number">3.4.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            ${var html} = &#39;&#39;;
            for (var i = 1; i &lt;= 10; i++) {
                html = html + &#39;${&lt;li&gt;}&#39; + ${i} + &#39;&lt;/li&gt;&#39;;
            }
            document.getElementById(&#39;fruits&#39;).innerHTML = html;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;箇条書き&lt;/h1&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;ul id=&quot;fruits&quot;&gt;
    &lt;/ul&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="ボタンを押すたびに要素を追加する"><span class="header-section-number">3.5</span> ボタンを押すたびに要素を追加する</h2>
<p>先程までのプログラムでは，var html = ''で文字列を初期化して，HTMLを生成していたので，ボタンを複数回押しても，出力される文字列は同様でしたが，一行目を次のように書き換えて</p>
<pre><code>var html = document
    .getElementById(&#39;fruits&#39;).innerHTML;</code></pre>
<p>ボタンを押すたびに追記されるように改造することができます．</p>
<h3 id="tips-1"><span class="header-section-number">3.5.1</span> tips</h3>
<p>ボタンBが押されたときの処理では，appendChildを使った別の書き方の例を載せてあります．</p>
<pre><code>var li = document.createElement(&#39;li&#39;);
li.innerHTML = &#39;めろん&#39;;
document.getElementById(&#39;fruits&#39;).appendChild(li);</code></pre>
<h3 id="mainindex.html-9"><span class="header-section-number">3.5.2</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            ${var html} = document.getElementById(&#39;fruits&#39;).${innerHTML};
            html = html + &#39;&lt;li&gt;めろん&lt;/li&gt;&#39;;
            document.getElementById(&#39;fruits&#39;).innerHTML = html;
        }
        function buttonBPressed() {
            var li = document.createElement(&#39;li&#39;);
            li.innerHTML = &#39;めろん&#39;;
            document.getElementById(&#39;fruits&#39;).appendChild(li);
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;箇条書き&lt;/h1&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;B&lt;/button&gt;
    &lt;hr&gt;
    &lt;ul id=&quot;fruits&quot;&gt;
    &lt;/ul&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="テキストフィールドから入力したものをリストに追加する"><span class="header-section-number">3.6</span> テキストフィールドから入力したものをリストに追加する</h2>
<p>これまでの応用で，テキストフィールドから入力されたものをリストに追加するプログラムを作ることができます．</p>
<h3 id="mainindex.html-10"><span class="header-section-number">3.6.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            var fruit = document.getElementById(&#39;input-fruit&#39;).value;
            var html = document.getElementById(&#39;fruits&#39;).innerHTML;
            html = html + &#39;&lt;li&gt;&#39; + ${fruit} + &#39;&lt;/li&gt;&#39;;
            document.getElementById(&#39;fruits&#39;).innerHTML = html;
            document.getElementById(&#39;input-fruit&#39;).value = &#39;&#39;;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;箇条書き&lt;/h1&gt;
    &lt;input id=&quot;input-fruit&quot; type=&quot;text&quot;&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;ul id=&quot;fruits&quot;&gt;
    &lt;/ul&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="表の生成"><span class="header-section-number">3.7</span> 表の生成</h2>
<p>tableタグの中身を生成することで，表を生成することもできます．</p>
<p>表の一行はtrタグ，セルはtdタグで表現します．</p>
<h3 id="tips-2"><span class="header-section-number">3.7.1</span> tips</h3>
<p>ここでは，HTML部でtableタグを用意するのではなく，divタグを用意して，divタグの中身を生成するプログラムの最中で，tableタグを生成しています．この場合はどちらでも良いのですが，divタグを指定することによりより汎用的なプログラムを作ることができます．</p>
<h3 id="mainindex.html-11"><span class="header-section-number">3.7.2</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            var html = &#39;&#39;;
            html = html + &#39;&lt;table border=&quot;1&quot;&gt;&#39;;
            html = html + &#39;&lt;tr&gt;&#39;;
            html = html + &#39;&lt;td&gt;国語&lt;/td&gt;&#39;;
            html = html + &#39;&lt;td&gt;100&lt;/td&gt;&#39;;
            html = html + &#39;&lt;/tr&gt;&#39;;
            html = html + &#39;&lt;tr&gt;&#39;;
            html = html + &#39;&lt;td&gt;算数&lt;/td&gt;&#39;;
            html = html + &#39;&lt;td&gt;90&lt;/td&gt;&#39;;
            html = html + &#39;&lt;/tr&gt;&#39;;
            html = html + &#39;&lt;/table&gt;&#39;;
            document.getElementById(&#39;${table1}&#39;).innerHTML = html;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;表&lt;/h1&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;div id=&quot;table1&quot;&gt;&lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h1 id="セクション-応用編"><span class="header-section-number">4</span> セクション３ 応用編</h1>
<p>セクション３では，HTML生成に関する２つの応用プログラムを学びます．</p>
<h2 id="プルダウンメニュー"><span class="header-section-number">4.1</span> プルダウンメニュー</h2>
<p>プルダウンメニューを作成するには，selectタグを使います．</p>
<pre><code>&lt;select id=&quot;input-repeatnum&quot;&gt;
    &lt;option value=&quot;10&quot;&gt;10回&lt;/option&gt;
    &lt;option value=&quot;15&quot;&gt;15回&lt;/option&gt;
&lt;/select&gt;</code></pre>
<p>selectタグの中のoptionタグで，選択肢を指定します． value属性は，その選択した選択されたときに取得される値（.valueで取得できる属性） で，optionタグの中身（10回，15回など）は，画面に表示されるテキストです．</p>
<p>選択された選択肢の値は，Javascriptからは次のようなプログラムで取得することができます．</p>
<pre><code>var n = document
    .getElementById(&#39;xx&#39;).value;</code></pre>
<p>テキストフィールドと同様の方法です．</p>
<h3 id="hint-3"><span class="header-section-number">4.1.1</span> hint</h3>
<p>このプログラムは，プルダウンメニューで指定された回数分，数を数えるプログラムです．</p>
<h3 id="mainindex.html-12"><span class="header-section-number">4.1.2</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            var n = document.getElementById(&#39;input-repeatnum&#39;).value;
            n = Number(n);
            var html = &#39;&#39;;
            for (var i = 1; i &lt;= ${n}; i++) {
                html = html + &#39;&lt;li&gt;&#39; + ${i} + &#39;&lt;/li&gt;&#39;;
            }
            document.getElementById(&#39;list1&#39;).innerHTML = html;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;１からNまでの数字を数えるプログラム&lt;/h1&gt;
    数える回数（N）：
    &lt;select id=&quot;input-repeatnum&quot;&gt;
        &lt;option value=&quot;10&quot;&gt;10回&lt;/option&gt;
        &lt;option value=&quot;15&quot;&gt;15回&lt;/option&gt;
        &lt;option value=&quot;20&quot;&gt;20回&lt;/option&gt;
    &lt;/select&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;ul id=&quot;list1&quot;&gt;&lt;/ul&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="合計を求める"><span class="header-section-number">4.2</span> 合計を求める</h2>
<p>前の例題について，１からNまで数えるだけでなく，その数字までの総和を求めるプログラムに改造してみましょう．</p>
<p>９行目で，</p>
<pre><code>var sum = 0;</code></pre>
<p>と，総和を保存しておく変数を用意しておき，</p>
<p>１１行目で</p>
<pre><code>sum = sum + i;</code></pre>
<p>と，保存してある総和に，今数えている数(iに保存されている)を加算します．</p>
<h3 id="mainindex.html-13"><span class="header-section-number">4.2.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            var n = document.getElementById(&#39;input-repeatnum&#39;).value;
            n = Number(n);
            var html = &#39;&#39;;
            ${var sum = 0;}
            for (var i = 1; i &lt;= n; i++) {
                ${sum = sum + i;}
                html = html + &#39;&lt;li&gt;&#39; + sum + &#39;&lt;/li&gt;&#39;;
            }
            document.getElementById(&#39;list1&#39;).innerHTML = html;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;１からNまでの総和を求めるプログラム&lt;/h1&gt;
    求める回数（N）：
    &lt;select id=&quot;input-repeatnum&quot;&gt;
        &lt;option value=&quot;10&quot;&gt;10回&lt;/option&gt;
        &lt;option value=&quot;15&quot;&gt;15回&lt;/option&gt;
        &lt;option value=&quot;20&quot;&gt;20回&lt;/option&gt;
    &lt;/select&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;ul id=&quot;list1&quot;&gt;&lt;/ul&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h1 id="セクション1-ローカル変数とグローバル変数"><span class="header-section-number">5</span> セクション1 ローカル変数とグローバル変数</h1>
<p>セクション１では，ローカル変数とグローバル変数について学びます．</p>
<h2 id="ローカル変数"><span class="header-section-number">5.1</span> ローカル変数</h2>
<p>関数(function)内に定義された変数(var)は，関数内でのみ有効であることは，変数のスコープで習いました． 今回は，ボタンが何度も押される等で，関数が何度も呼ばれることを考えてみましょう．</p>
<p>buttonAPressed()関数内に変数xを定義し，０で初期化します．</p>
<pre><code>var x = 0;</code></pre>
<p>関数内で定義されたローカル変数（局所変数）は，関数の呼び出し毎に毎回保存領域が確保され，初期化され，関数が終わると消滅する呼び出し１回限り有効な変数です．したがって，ボタンを何度も押し，関数を何度実行しても，表示されるのは１のままです．</p>
<h3 id="mainindex.html-14"><span class="header-section-number">5.1.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            ${var x = 0;}
            x = x + 1;
            document.getElementById(&#39;label1&#39;).innerHTML = x;
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;p id=&quot;label1&quot;&gt;0&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="グローバル変数"><span class="header-section-number">5.2</span> グローバル変数</h2>
<p>関数(function)の外側に定義された変数(var)は，すべての関数で有効なグローバル変数（広域変数）となります． グローバル変数はどの関数からもその値を読み書きすることができます．プログラムが読み込まれると同時に初期化されて，プログラムが終了するまで値を保持し続けます．</p>
<pre><code>var x = 0;</code></pre>
<p>今度のプログラムでは，ボタンを何度押しても，前回の値が保存されているので，１ずつカウントアップするプログラムを作ることができます．</p>
<h3 id="mainindex.html-15"><span class="header-section-number">5.2.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        ${var x = 0;}

        function buttonAPressed() {
            x = x + 1;
            document.getElementById(&#39;label1&#39;).innerHTML = x;
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;p id=&quot;label1&quot;&gt;0&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="グローバル変数-1"><span class="header-section-number">5.3</span> グローバル変数（２）</h2>
<p>グローバル変数は関数間で値を共有し，どの関数からもその値を読み書きすることができます．</p>
<pre><code>x = 0;</code></pre>
<p>もう一つの関数を用意して，カウントをリセットするボタンを作ることができました．</p>
<h3 id="tips-3"><span class="header-section-number">5.3.1</span> tips</h3>
<p>このように，大変便利に見えるグローバル変数ですが，プログラムの保守という観点からは問題が多いので，極力控えてプログラムを作ることが推奨されています．簡単に説明すると，バグが起こったときに，ローカル変数ならばバグの範囲が限定しやすいのですが，グローバル変数が多いと，影響を与える関数（プログラム）の範囲が広大になってしまい，デバッグする範囲も広域に及びます．</p>
<h3 id="mainindex.html-16"><span class="header-section-number">5.3.2</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        var x = 0;

        function buttonAPressed() {
            ${x = x + 1;}
            document.getElementById(&#39;label1&#39;).innerHTML = x;
        }

        function buttonBPressed() {
            ${x = 0;}
            document.getElementById(&#39;label1&#39;).innerHTML = x;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;button onclick=&quot;buttonBPressed()&quot;&gt;B&lt;/button&gt;
    &lt;hr&gt;
    &lt;p id=&quot;label1&quot;&gt;0&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h1 id="セクション-canvas入門"><span class="header-section-number">6</span> セクション２ canvas入門</h1>
<p>セクション２では，canvasの基本的な使い方を学びます．</p>
<h2 id="canvasをつくり四角形を書く"><span class="header-section-number">6.1</span> canvasをつくり，四角形を書く</h2>
<p>canvasタグ（要素）は，そこにJavascriptプログラムを使って図形や文字を書いたり，画像を描画することができるHTMLの要素です． canvasタグで，キャンパスを作ります．大きさを指定し，Javascriptから読み書きできるようにidをつけ，見分けがつくようにボーダー線をつけます．</p>
<pre><code>&lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;</code></pre>
<p>プログラムでは，１行目で，</p>
<pre><code>var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);</code></pre>
<p>おなじみのgetElementById()関数を使い，idを指定して要素を取得し，2Dで書き込めるcontextオブジェクトを取得し，ctx変数に格納します．この行は，canvasに書き込むプログラムを作るときに毎回書くおまじないと思ってください．</p>
<p>次の行で，背景を塗りつぶします．前回になにか書いたものがあればこの行で消されます． ボタンが押されるたびにcanvasに追記していきたい場合はこの行を削除します．</p>
<pre><code>ctx.clearRect(0, 0, 400, 300);</code></pre>
<p>枠線と塗りつぶしの色を決めます．</p>
<pre><code>ctx.strokeStyle = &#39;#0000FF&#39;; //枠線の色は青
ctx.fillStyle = &#39;#FF0000&#39;; //塗りつぶしの色は赤</code></pre>
<p>strokeRect(x, y, w, h)関数は，x, y座標を基点に，幅w, 高さhの四角形を描画します．fillRectは塗りつぶしの四角形を描画します．</p>
<pre><code>ctx.strokeRect(200, 80, 100, 50);
ctx.fillRect(20, 40, 50, 100);</code></pre>
<h3 id="mainindex.html-17"><span class="header-section-number">6.1.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;

        function buttonAPressed() {
            var ctx = document.getElementById(&#39;${canvas1}&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            ctx.strokeStyle = &#39;#0000FF&#39;;
            ctx.fillStyle = &#39;#FF0000&#39;;

            ctx.strokeRect(200, 80, 100, 50);
            ctx.fillRect(20, 40, 50, 100);
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;${canvas} id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="円を書く"><span class="header-section-number">6.2</span> 円を書く</h2>
<p>円を書くには，まず，</p>
<pre><code>ctx.beginPath();</code></pre>
<p>でパス（図形を描画するとき一つ一つの動作でできる要素のことをパスと呼びます）を初期化します．</p>
<p>次に，</p>
<pre><code>ctx.arc(100, 100, 50, 0, Math.PI * 2);</code></pre>
<p>で，円弧を書きます．引数は(x, y, 半径, 開始角度(ラジアン), 終了角度(ラジアン))です．上記の例では，座標（100, 100）を中心に，半径50の円を書きます．</p>
<p>最後に，</p>
<pre><code>ctx.stroke();</code></pre>
<p>で，パスを終了し，図形を描画します．</p>
<p>円弧ではなく，塗りつぶすには</p>
<pre><code>ctx.fill();</code></pre>
<p>で，パスを終了し，図形を描画します．</p>
<h3 id="hint-4"><span class="header-section-number">6.2.1</span> hint</h3>
<p>180°はラジアンでπ，360°はラジアンで２πとなります．</p>
<h3 id="mainindex.html-18"><span class="header-section-number">6.2.2</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;

        function buttonAPressed() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            ctx.strokeStyle = &#39;#0000FF&#39;;
            ctx.fillStyle = &#39;#FF0000&#39;;

            ctx.beginPath();
            ctx.${arc}(100, 100, 50, 0, Math.PI * 2);
            ctx.stroke();

            ctx.beginPath();
            ctx.arc(200, 100, 50, 0, Math.PI * 2);
            ctx.fill();
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="線を書く"><span class="header-section-number">6.3</span> 線を書く</h2>
<p>線を書くには，まずbeginPath();でパスを初期化し，</p>
<p>始点を</p>
<pre><code>ctx.moveTo(100, 100);</code></pre>
<p>で設定し，終点を</p>
<pre><code>ctx.lineTo(200, 200);</code></pre>
<p>で設定します．</p>
<p>最後に，</p>
<pre><code>ctx.stroke();</code></pre>
<p>で，パスを終了し，線を描画します．</p>
<p>lineToを２回以上呼び出して，３角形以上の多角形ができる場合には，始点と終点をつなぎ，多角形を作ります．</p>
<h3 id="mainindex.html-19"><span class="header-section-number">6.3.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;

        function buttonAPressed() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            ctx.strokeStyle = &#39;#0000FF&#39;;
            ctx.fillStyle = &#39;#FF0000&#39;;

            //100, 100から200, 200 へ線を引く
            ctx.${beginPath()};
            ctx.${moveTo}(100, 100);
            ctx.${lineTo}(200, 200);
            ctx.${stroke}();

            //３点を頂点とする三角形を描画する
            ctx.beginPath();
            ctx.moveTo(200, 200);
            ctx.lineTo(250, 100);
            ctx.lineTo(300, 200);
            ctx.closePath();
            ctx.stroke();
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="文字列を描画する"><span class="header-section-number">6.4</span> 文字列を描画する</h2>
<p>文字列を描画するには，</p>
<pre><code>ctx.font = &quot;30px sans-serif&quot;;</code></pre>
<p>で，フォントとその大きさを指定した後，</p>
<pre><code>ctx.fillText(&quot;hello, world!&quot;, 20, 75, 200);</code></pre>
<p>で，文字列を書き込みます．引数は(表示する文字列, x座標, y座標, 最大幅)です．</p>
<p>抜き文字を描画したい場合は，</p>
<pre><code>ctx.strokeText(&quot;hello, world!&quot;, 20, 175, 200);</code></pre>
<p>で描画します．</p>
<h3 id="mainindex.html-20"><span class="header-section-number">6.4.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;

        function buttonAPressed() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            ctx.${font} = &quot;30px sans-serif&quot;;
            ctx.${fillText}(&quot;hello, world!&quot;, 20, 75, 200);            
            ctx.strokeText(&quot;hello, world!&quot;, 20, 175, 200);
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="画像を描画する"><span class="header-section-number">6.5</span> 画像を描画する</h2>
<p>画像を描画するには，まず，グローバル変数として，画像オブジェクトを生成し，ファイル名を指定して画像を読み込みます． この書き方も，意味は完全にわからなくて構いませんので，最初はこう書くものだと覚えてください．</p>
<pre><code>var img01 = new Image();
img01.src = &quot;goo.png&quot;;</code></pre>
<p>読み込んだ画像をキャンパスに描くには，buttonAPressed関数内で，</p>
<pre><code>ctx.drawImage(img01, 10, 10, 100, 100);</code></pre>
<p>と記述し描画します．引数は(画像オブジェクト, x座標, y座標, 幅，高さ)です．</p>
<h3 id="mainindex.html-21"><span class="header-section-number">6.5.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;

        var img01 = new Image();
        img01.src = &quot;goo.png&quot;;

        function buttonAPressed() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            ctx.${drawImage}(img01, 10, 10, 100, 100);
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h3 id="files"><span class="header-section-number">6.5.2</span> files</h3>
<ul>
<li><a href="src/goo.png">goo.png</a></li>
</ul>
<h1 id="セクション-応用編-1"><span class="header-section-number">7</span> セクション３ 応用編</h1>
<p>セクション３では，canvasを使った３つの応用プログラムを学びます．</p>
<h2 id="繰り返し図形"><span class="header-section-number">7.1</span> 繰り返し図形</h2>
<p>canvasを使ったdrawXXXなどという記述は，Javascriptプログラムですから，これ魔に習った基礎的なプログラミングテクニック(for文，if文)が応用できます．</p>
<p>例えば，四角形を横に並べて１０個書くには，x座標を工夫して</p>
<pre><code>for (var i = 0; i &lt; 10; i++) {
    ctx.strokeRect(i * 15, 50, 10, 10);
}</code></pre>
<p>というように書くと，繰り返しを使って多くの同様の図形を書くことができます．</p>
<h3 id="mainindex.html-22"><span class="header-section-number">7.1.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;

        function buttonAPressed() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            for (var i = 0; i &lt; 10; i++) {
                ctx.strokeRect(${i * 15}, 50, 10, 10);
            }
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="テキストフィールドと組み合わせる"><span class="header-section-number">7.2</span> テキストフィールドと組み合わせる</h2>
<p>canvasの外にあるテキストフィールドと組み合わせてプログラムを作ることもできます．</p>
<p>次のプログラムでは，テキストフィールドからx座標とy座標の入力を受け取り，その場所に四角形を描いています．</p>
<h3 id="mainindex.html-23"><span class="header-section-number">7.2.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        function buttonAPressed() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            var x = document.getElementById(&#39;x&#39;).value;
            x = Number(x);
            var y = document.getElementById(&#39;y&#39;).value;
            y = Number(y);

            ctx.strokeRect(${x}, ${y}, 10, 10);
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    X:&lt;input id=&quot;x&quot; type=&quot;text&quot; value=&quot;0&quot;&gt;Y:&lt;input id=&quot;y&quot; type=&quot;text&quot; value=&quot;0&quot;&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="じゃんけんプログラム"><span class="header-section-number">7.3</span> じゃんけんプログラム</h2>
<p>canvasの画像描画を応用して，じゃんけんプログラムを作ってみましょう． グー，チョキ，パーの画像を用意して，乱数を使い，どの手を出すのかを決めて，その画像を表示します．</p>
<h3 id="mainindex.html-24"><span class="header-section-number">7.3.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;

        var img01 = new Image();
        img01.src = &quot;goo.png&quot;;
        var img02 = new Image();
        img02.src = &quot;choki.png&quot;;
        var img03 = new Image();
        img03.src = &quot;pa.png&quot;;

        function buttonAPressed() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            var x = Math.floor(Math.${random}() * 3) + 1;
            if (x == 1) {
                ctx.drawImage(img01, 10, 10, 100, 100);
            } else if (x == 2) {
                ctx.drawImage(img02, 10, 10, 100, 100);
            } else if (x == 3) {
                ctx.drawImage(img03, 10, 10, 100, 100);
            }
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h3 id="files-1"><span class="header-section-number">7.3.2</span> files</h3>
<ul>
<li><a href="src/goo.png">goo.png</a></li>
<li><a href="src/choki.png">choki.png</a></li>
<li><a href="src/pa.png">pa.png</a></li>
</ul>
<h1 id="セクション1-タイマー"><span class="header-section-number">8</span> セクション1 タイマー</h1>
<p>セクション１では，タイマーの使い方を学びます．</p>
<h2 id="タイマーから一定間隔で関数を呼び出す"><span class="header-section-number">8.1</span> タイマーから一定間隔で関数を呼び出す</h2>
<p>これまでのプログラムを動作させるには，必ずユーザがなにか操作（ボタンを押すなど）をする必要がありましたが，キッチンタイマーなど，定期的に，自動的に動作するプログラムを作るときには，時を刻むタイマーが必要になります． Javascriptでは，setInterval関数でタイマーを起動します．</p>
<p>setIntervalの書法は，次の通りです．</p>
<pre><code>setInterval([関数名], [呼び出す間隔(ミリ秒)]);</code></pre>
<p>例えば，</p>
<pre><code>setInterval(tick, 1000);</code></pre>
<p>という行では，tickという関数（下に定義してありますね）を，1000ミリ秒ごと，つまり１秒毎に呼び出すタイマーを起動する，という意味になります．Aボタンを押すと，setInterval関数が実行され，タイマーが起動して１秒毎にtick関数が実行されるようになります．</p>
<h3 id="mainindex.html-25"><span class="header-section-number">8.1.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        var x = 0;

        function buttonAPressed() {
            ${setInterval}(tick, 1000);
        }

        function tick() {
            x = x + 1;
            document.getElementById(&#39;time&#39;).innerHTML = x;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;p id=&quot;time&quot;&gt;0&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="タイマーを停止する"><span class="header-section-number">8.2</span> タイマーを停止する</h2>
<p>タイマーを停止するには，</p>
<pre><code>clearInterval([タイマー変数]);</code></pre>
<p>関数を呼び出します．タイマー変数を記憶しておく必要があるので，グローバル変数として，</p>
<pre><code>var timer;</code></pre>
<p>を定義し，タイマーが起動したときに，setInterval関数の戻り値として得られるタイマー変数を記憶しておき，</p>
<pre><code>timer = setInterval(tick, 1000);</code></pre>
<p>clearInterval関数でタイマーを停止します．</p>
<pre><code>clearInterval(timer);</code></pre>
<h3 id="mainindex.html-26"><span class="header-section-number">8.2.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        var x = 0;
        var timer;

        function buttonAPressed() {
            ${timer} = setInterval(tick, 1000);
        }

        function buttonBPressed() {
            ${clearInterval(timer)};
        }

        function tick() {
            x = x + 1;
            document.getElementById(&#39;time&#39;).innerHTML = x;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;button onclick=&quot;buttonBPressed()&quot;&gt;B&lt;/button&gt;
    &lt;hr&gt;
    &lt;p id=&quot;time&quot;&gt;0&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="タイマーの重複起動を回避する"><span class="header-section-number">8.3</span> タイマーの重複起動を回避する</h2>
<p>一つ前のプログラムでは，タイマーの起動と停止を行うことができるようになりましたが， 何どもAボタンを押すと，タイマーがたくさん起動してしまい，停止もできなくなります（変数は一つのため，最後に起動したものしか停止できない）．</p>
<p>タイマーの重複起動を回避するテクニックをはいくつかあるのですが，状態変数による場合分けのプログラムを作ってみましょう． '停止中', か'起動中'かを記憶しておく変数stateをグローバル変数として定義します;</p>
<pre><code>var state = &#39;停止中&#39;;</code></pre>
<p>buttonAPressed()関数は次のように書き換えます．</p>
<pre><code>if (state == &#39;停止中&#39;) {
    timer = setInterval(tick, 1000);
    state = &#39;動作中&#39;;
}</code></pre>
<p>このプログラムは，stateが「停止中」のときだけ，タイマーを起動し，起動したらstateを「動作中」に切り替えます．</p>
<p>buttonBPressed()関数は次のように書き換えます．</p>
<pre><code>function buttonBPressed() {
    if (state == &#39;動作中&#39;) {
        clearInterval(timer);
        state = &#39;停止中&#39;;
    }
}</code></pre>
<p>このプログラムは，stateが「動作中」のときだけ，タイマーを停止し，停止したらstateを「停止中」に切り替えます．</p>
<h3 id="mainindex.html-27"><span class="header-section-number">8.3.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        var x = 0;
        var timer;
        var state = &#39;停止中&#39;;

        function buttonAPressed() {
            if (state == &#39;${停止中}&#39;) {
                timer = setInterval(tick, 1000);
                state = &#39;${動作中}&#39;;
            }
        }

        function buttonBPressed() {
            if (state == &#39;動作中&#39;) {
                clearInterval(timer);
                state = &#39;停止中&#39;;
            }
        }

        function tick() {
            x = x + 1;
            document.getElementById(&#39;time&#39;).innerHTML = x;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;button onclick=&quot;buttonBPressed()&quot;&gt;B&lt;/button&gt;
    &lt;hr&gt;
    &lt;p id=&quot;time&quot;&gt;0&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="シンプルなインターフェイスに"><span class="header-section-number">8.4</span> シンプルなインターフェイスに</h2>
<p>state変数で状態を管理できるようになると，ボタンは一つでも同様の機能を実現できることに気づきます． AボタンとBボタンの動作について，Aボタン一つでその状態ごとに動作を分岐するようにして，Aボタンを押すたびに停止と実行を切り替えるプログラムを作ることができます．</p>
<h3 id="mainindex.html-28"><span class="header-section-number">8.4.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        var x = 0;
        var timer;
        var state = &#39;停止中&#39;;

        function buttonAPressed() {
            if (${state} == &#39;停止中&#39;) {
                timer = setInterval(tick, 1000);
                state = &#39;動作中&#39;;
            } else if (${state} == &#39;動作中&#39;) {
                clearInterval(timer);
                state = &#39;停止中&#39;;
            }
        }

        function tick() {
            x = x + 1;
            document.getElementById(&#39;time&#39;).innerHTML = x;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;p id=&quot;time&quot;&gt;0&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="ストップウォッチ"><span class="header-section-number">8.5</span> ストップウォッチ</h2>
<p>タイマーのプログラムを応用して，ストップウォッチを作ってみましょう． 1/10秒の位と1秒の二桁の変数を用意して，100ミリ秒ごとに1/10秒の位をカウントアップし，1/10秒のくらいが10になったら，繰り上がりを実現します．</p>
<p>tick()関数の次のプログラムに注目しましょう．</p>
<pre><code>oneof10sec = oneof10sec + 1;
if (oneof10sec == 10) {
    sec = sec + 1;
    oneof10sec = 0;
}</code></pre>
<h3 id="mainindex.html-29"><span class="header-section-number">8.5.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        var sec = 0;
        var oneof10sec = 0;
        var timer;
        var state = &#39;停止中&#39;;

        function buttonAPressed() {
            if (state == &#39;停止中&#39;) {
                timer = setInterval(tick, 100);
                state = &#39;動作中&#39;;
            } else if (state == &#39;動作中&#39;) {
                clearInterval(timer);
                state = &#39;停止中&#39;;
            }
        }

        function tick() {
            oneof10sec = oneof10sec + 1;
            if (oneof10sec == 10) {
                sec = ${sec + 1};
                oneof10sec = ${0};
            }
            document.getElementById(&#39;output-sec&#39;).innerHTML = sec;
            document.getElementById(&#39;output-oneof10sec&#39;).innerHTML = oneof10sec;
        }
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;p&gt;&lt;span id=&quot;output-sec&quot;&gt;0&lt;/span&gt;:&lt;span id=&quot;output-oneof10sec&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h1 id="セクション-タイマーとcanvasを使ったアニメーションの作成"><span class="header-section-number">9</span> セクション２ タイマーとcanvasを使ったアニメーションの作成（１）</h1>
<p>セクション２では，タイマーとcanvasを使って図形を動かすアニメーションを作成する方法を学びます．</p>
<h2 id="四角形を動かすアニメーション"><span class="header-section-number">9.1</span> 四角形を動かすアニメーション</h2>
<p>タイマーとcanvasを使って，図形を動かすアニメーションを作ることができます． tick()関数は，20ミリ秒ごとに呼ばれる関数で，この中で，毎回キャンパスを書き換えます． 毎回，少しずつ図形を動かしながら書くことで，物体が動いているように見えるアニメーションを作ることができます．</p>
<p>アニメーションを作るには，物体の位置を記憶しておく必要があるため，座標を記憶するグローバル変数を作成します．</p>
<pre><code>var x = 10;
var y = 10;</code></pre>
<p>20ミリ秒ごとに実行されるtick()関数では，毎回</p>
<pre><code>x = x + 2;</code></pre>
<p>というプログラムでxを2増やした後</p>
<pre><code>ctx.strokeRect(x, y, 10, 10);</code></pre>
<p>で，増やされたx変数の値を使ってx座標の位置に四角形を記述します．結果的に毎回，2ピクセルずつx座標を右に動かして描画します．これをタイマーで繰り返すと，物体が右に動いているように見えます．</p>
<h3 id="mainindex.html-30"><span class="header-section-number">9.1.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        var timer;
        var state = &#39;停止中&#39;;

        function buttonAPressed() {
            if (state == &#39;停止中&#39;) {
                timer = setInterval(tick, 20);
                state = &#39;動作中&#39;;
            } else if (state == &#39;動作中&#39;) {
                clearInterval(timer);
                state = &#39;停止中&#39;;
            }
        }

        var x = 10;
        var y = 10;

        function tick() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            x = x + 2;
            ctx.strokeRect(${x}, y, 10, 10);
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="四角形を動かすアニメーションキャンパス外に出てしまった場合の処理"><span class="header-section-number">9.2</span> 四角形を動かすアニメーション（キャンパス外に出てしまった場合の処理）</h2>
<p>先のプログラムでは，四角形は右に動いていきますが，やがてキャンパス右外に出てしまいます． キャンパス右橋と左端をつないで，右外に出た場合には左から入ってくるようにしてみましょう．</p>
<p>tick()関数で，x座標を増やしたときに，x座標がキャンバスサイズ(今回は400)より大きい場合を調べて，大きくなった場合にはx座標を0に戻すプログラムを次のように書きます．</p>
<pre><code>if (x &gt; 400) {
    x = 0;
}</code></pre>
<h3 id="mainindex.html-31"><span class="header-section-number">9.2.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;
        var timer;
        var state = &#39;停止中&#39;;

        function buttonAPressed() {
            if (state == &#39;停止中&#39;) {
                timer = setInterval(tick, 20);
                state = &#39;動作中&#39;;
            } else if (state == &#39;動作中&#39;) {
                clearInterval(timer);
                state = &#39;停止中&#39;;
            }
        }

        var x = 10;
        var y = 10;

        function tick() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            x = x + 2;
            if (x &gt; 400) {
                x = ${0};
            }
            ctx.strokeRect(x, y, 10, 10);
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<h2 id="パラパラ漫画アニメーション"><span class="header-section-number">9.3</span> パラパラ漫画アニメーション</h2>
<p>タイマーを利用して，画像を次々と書き換えることもできます．これによってパラパラ漫画の要領でアニメーションを作ることができます．このプログラム例はじゃんけんのグー，チョキ，パーを切り替えるアニメーションです．</p>
<p>現在の画像番号を保持する変数xをグローバル変数に定義します．</p>
<pre><code>var x = 1;</code></pre>
<p>3枚の画像があるため，変数は1, 2, 3と書き換えるようにします．</p>
<pre><code>if (x &lt;= 2) {
    x = x + 1;
} else {
    x = 1;
}</code></pre>
<h3 id="mainindex.html-32"><span class="header-section-number">9.3.1</span> main(index.html)</h3>
<pre><code>&lt;html&gt;

&lt;head&gt;
    &lt;script&gt;

        var img01 = new Image();
        img01.src = &quot;goo.png&quot;;
        var img02 = new Image();
        img02.src = &quot;choki.png&quot;;
        var img03 = new Image();
        img03.src = &quot;pa.png&quot;;

        var timer;
        var state = &#39;停止中&#39;;

        var x = 1;

        function buttonAPressed() {
            if (state == &#39;停止中&#39;) {
                timer = setInterval(tick, 20);
                state = &#39;動作中&#39;;
            } else if (state == &#39;動作中&#39;) {
                clearInterval(timer);
                state = &#39;停止中&#39;;
            }
        }

        function tick() {
            var ctx = document.getElementById(&#39;canvas1&#39;).getContext(&#39;2d&#39;);
            ctx.clearRect(0, 0, 400, 300);

            if (x == 1) {
                ctx.drawImage(img01, 10, 10, 100, 100);
            } else if (x == 2) {
                ctx.drawImage(img02, 10, 10, 100, 100);
            } else if (x == 3) {
                ctx.drawImage(img03, 10, 10, 100, 100);
            }

            if (x &lt;= 2) {
                x = ${x + 1};
            } else {
                x = ${1};
            }
        }

    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;button onclick=&quot;buttonAPressed()&quot;&gt;A&lt;/button&gt;
    &lt;hr&gt;
    &lt;canvas id=&quot;canvas1&quot; width=&quot;400&quot; height=&quot;300&quot; style=&quot;border: solid 1px;&quot;&gt;&lt;/canvas&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
</body>
</html>
